<html>
<head>
  <!--https://github.com/jamis/csmazes/tree/master
  https://stackoverflow.com/questions/38502/whats-a-good-algorithm-to-generate-a-maze-->
  <title>Maze Game</title>
  <link rel="stylesheet" type="text/css" href="css/mazes.css" />
  
  <!--jQuery, Popper.js, Bootstrap.js-->
  <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>        
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>        
  
  <!-- BOOTSTRAP -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">        
        
  <script src="maze.js" type="text/javascript"></script>
  <script defer src="minigame4.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script type="text/javascript">
    function resetMazes() {
      for(var i = 0; i < arguments.length; i++) {
        var id = arguments[i];
        var element = document.getElementById(id);
        element.mazeReset();
      }
    }
  </script>

  <style type="text/css">
    /* img {
      vertical-align:unset;
      pointer-events: none;
    } */

    p {
      margin: 10px 20px;
      font-size: 2rem;
    }

    small {
      color: #777;
      font-size: 11px;
    }

    input { width: 50%; }

    #mic { cursor: pointer }

  </style>
</head>
<body>
  <div id="bg-container">        
  </div>

  <div id="start-overlay" class="container-fluid">
    <div class="container">
      <div class="row">
        <h1>Choose your playstyle</h1>
      </div>
      
      <div class="row">
        <div class="btn-group-vertical" id="gamemode">
          <input type="radio" class="btn-check" name="btnradio" id="keyboard" autocomplete="off" value='keyboard' checked>
          <label class="btn btn-outline-primary" for="keyboard">Keyboard</label>
        
          <input type="radio" class="btn-check" name="btnradio" id="voice" value='voice' autocomplete="off">
          <label class="btn btn-outline-primary" for="voice">Voice control</label>
        </div>
      </div>
      <script> 
        $('#keyboard').on('click', () => {
          $('#keyboard-tutorial').css({'display':'block'});
          $('#voice-tutorial').css({'display':'none'});
        });
        
        $('#voice').on('click', () => {
          $('#keyboard-tutorial').css({'display':'none'});
          $('#voice-tutorial').css({'display':'block'});
        }) 
      </script>
      <div class="row" style="margin-top:1em">
          <div id="keyboard-tutorial">
            <h2>Tutorial: </h2>
            <h4>Use WASD to control your character through maze</h4>
          </div>
          <div id="voice-tutorial" style="display:none">
            <h2>Tutorial: </h2>
            <h4>Control your character by saying 'up', 'down', 'left', 'right' while pressing 
              <img src="Assets/Microphone.png" style="image-rendering: pixelated; border: 1px black solid">
              button </h4>
            <h4>You will need to enable microphone access</h4>
          </div>
      </div>
  
  
      <div class="row">
        <button type="button" id='start' class="btn btn-outline-primary btn-lg">Enter the maze !</button>
      </div>
    </div>
  </div>

  <div id="countdown-overlay" class="container-fluid">
    <h1>3</h1>
  </div>

  <div id="end-overlay" class="container-fluid">
    <h1>Game over !</h1> <br>
    <h2> You have earned <span id="point">0</span> points (coins)</h2>

    <table class="table table-dark"  id="scoreboard">
      <thead>
        <tr>
          <th scope="col">Placement</th>
          <th scope="col">Players</th>
          <th scope="col">Score</th>
        </tr>
      </thead>
      <tbody>
        <!--
        <tr>
          <th scope="row">1</th>
          <td>Mark</td>
        </tr>
        <tr>
          <th scope="row">2</th>
          <td>Jacob</td>
        </tr>
        <tr>
          <th scope="row">3</th>
          <td>Larry</td>
        </tr>
        -->
      </tbody>
    </table>

    <div class="row">
      <button type="button" id="retry" class="btn btn-outline-primary btn-lg" >Retry !</button>
    </div>

    <div class="row">
      <button type="button" id="menu" class="btn btn-outline-primary btn-lg" >Main Menu</button>
    </div>
  </div>


  <div id='game-container' class="container">
    <div id="header-container" class="row">
      <div class="col-4"><h1 style="font-size: 2em;">Escape the maze!</h1></div>
      <div class="col-4"><h1 style="font-size: 2em;" id="time">10 seconds</h1></div>
      <div class="col-4"><h1 style="font-size: 2em;" id="coin">0</h1></div>
    </div>
    
    <div id="maze-container">
      <script type="text/javascript">
        var mazeSize = 7;
        Maze.createWidget("Kruskal", mazeSize, mazeSize, { "class": "small", "watch": false });
      </script>
    </div>

    <div id="footer-container">
      <div id="voice-instruction">
        <p>Click and hold the mic to speak !</p>
        <div id="mic"><img src="Assets/Microphone.png" style="image-rendering: pixelated; border: 1px black solid"></div>
        <p>Result: <span id="cmd-result"></span></p>
      </div>
      <div id="keyboard-instruction">
        <p>Press W A S D to control your kitty !</p>
      </div>
    </div>
  </div>

</body>
</html>
